# Unity + Git Guide

Unity-specific tips for working with Git in a game jam.

---

## Project Structure

```
Unity/
  Assets/           <- Your game content goes here
    Scenes/
    Scripts/
    Sprites/
    Audio/
    Prefabs/
  Packages/         <- Package manager config
    manifest.json
  ProjectSettings/  <- Project configuration
  Library/          <- GENERATED (gitignored)
  Temp/             <- GENERATED (gitignored)
  Logs/             <- GENERATED (gitignored)
```

---

## What to Commit

**DO commit:**
- `Assets/` - All your game content
- `Packages/manifest.json` - Your package dependencies
- `ProjectSettings/` - Project settings
- Any `.meta` files (Unity uses these!)

**DON'T commit (already in .gitignore):**
- `Library/` - Regenerated when you open the project
- `Temp/` - Temporary build files
- `Logs/` - Log files
- `*.csproj`, `*.sln` - Generated by Unity
- `Build/`, `Builds/` - Your exported game

---

## Unity-Specific Git Gotchas

### 1. Always Commit .meta Files

Every file in Unity has a `.meta` file that contains important settings (GUIDs, import settings). If you don't commit these:
- References between assets break
- Import settings are lost
- Other team members get different results

**If you see .meta files in your changes, commit them!**

### 2. Scene Files are Conflict-Prone

Unity scene files (`.unity`) contain:
- All GameObjects in the scene
- All component settings
- Hierarchy structure

Two people editing the same scene = guaranteed conflict.

**Solutions:**
- **Assign scene ownership:** "Sarah owns Level1.unity"
- **Use prefabs:** Put reusable objects in prefabs instead
- **Use additive scenes:** Split your game into multiple scenes
- **Communicate:** "I'm editing the main scene!"

### 3. Prefab Conflicts

Prefabs can also conflict. Same solutions apply:
- Assign ownership of complex prefabs
- Break large prefabs into smaller ones
- Communicate when editing shared prefabs

### 4. Force Text Serialization

Make sure Unity saves files as text (not binary) for better diffs:

1. Go to **Edit > Project Settings > Editor**
2. Find **Asset Serialization**
3. Set to **Force Text**

This should already be set, but double-check!

---

## Opening the Project

### First Time Setup

1. Open **Unity Hub**
2. Click **Add** > **Add project from disk**
3. Navigate to the `Unity` folder in this template
4. Click **Select Folder**
5. Unity may ask to upgrade/install the matching version
6. Click on the project to open it

First open will take a while as Unity generates the `Library` folder.

### After Pulling Changes

After pulling changes from Git:
1. Unity may reimport some assets
2. Wait for the progress bar to complete
3. **Save the scene** if prompted

If things look weird after pulling:
1. Try **Assets > Reimport All**
2. Or close and reopen Unity

---

## Unity + Git Workflow

### Before Starting Work

1. **Open GitHub Desktop** and pull latest changes
2. **Open Unity** and wait for any reimports
3. Tell your team what you're working on

### While Working

1. **Save scenes often** (Ctrl+S)
2. **Commit small changes frequently**
3. **Test your changes run** before committing

### Committing Changes

In GitHub Desktop, you'll see files like:
```
Assets/Scenes/Level1.unity
Assets/Scenes/Level1.unity.meta
Assets/Scripts/Player.cs
Assets/Scripts/Player.cs.meta
```

Always commit files AND their .meta files together!

---

## Building Your Game

### Creating a Build

1. Go to **File > Build Settings**
2. Add your scenes to **Scenes In Build**
3. Select your target platform (Windows is recommended)
4. Click **Build**
5. Choose a folder **outside** your Unity project
6. Wait for the build to complete

### Build Folder Structure

Keep builds separate from your project:
```
MyGameJam/
  Unity/           <- Your Unity project
  Builds/          <- Build outputs (gitignored)
    Windows/
      MyGame.exe
```

### Testing Before Submission

1. Build your game
2. **Copy the entire build folder** to another location
3. Run it from there
4. This tests it works without Unity

---

## Common Unity Issues

### "Missing Script" Errors

If you see pink "Missing Script" on GameObjects:
- A script file was deleted or renamed
- A teammate renamed a script
- The script didn't get committed properly

**Fix:** Check your Git history for the script, or recreate it.

### "Missing Reference" Errors

If Inspector fields show "Missing":
- A referenced asset was moved/deleted
- The .meta file got out of sync

**Fix:** Reassign the reference in the Inspector.

### Scene Won't Load After Pull

Try in order:
1. **Save and close** the current scene
2. Open the scene fresh
3. **Assets > Reimport All**
4. Close and reopen Unity
5. Ask your teammate what they changed

### "Can't Add Script" Error

If you can't add a script to a GameObject:
- The script has compile errors
- The class name doesn't match the filename
- There's a `Debug.Log` outside a method

Check the Console for the actual error.

---

## Recommended Unity Settings

### Version Control Mode

1. **Edit > Project Settings > Editor**
2. Set **Version Control Mode** to **Visible Meta Files**

### Asset Serialization

1. **Edit > Project Settings > Editor**
2. Set **Asset Serialization Mode** to **Force Text**

### Line Endings (Windows)

1. **Edit > Project Settings > Editor**
2. Set **Line Endings for New Scripts** to **OS Native**

---

## Useful Unity Packages

These packages can help your jam:

| Package | Use For |
|---------|---------|
| Input System | Modern input handling |
| 2D Sprite | 2D game development |
| TextMeshPro | Better text rendering |
| Cinemachine | Camera follow/effects |
| Post Processing | Visual effects |

Add packages via **Window > Package Manager**.

---

## Quick Reference

### Keyboard Shortcuts

| Action | Shortcut |
|--------|----------|
| Save Scene | Ctrl+S |
| Play | Ctrl+P |
| Pause | Ctrl+Shift+P |
| Duplicate | Ctrl+D |
| Delete | Delete |
| Focus on Selected | F |

### Console Shortcuts

| Action | Shortcut |
|--------|----------|
| Clear Console | Ctrl+Shift+C |
| Open Console | Ctrl+Shift+C |

---

## See Also

- [Git Guide](GIT_GUIDE.md) - Complete Git tutorial
- [For Programmers](FOR_PROGRAMMERS.md) - General programming tips
- [For Artists](FOR_ARTISTS.md) - Art and asset tips
